# =============================================================================
# IntelliLog-AI Configuration Template
# =============================================================================
# Copy this file to .env and fill in your actual values
# cp .env.example .env

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_URL=postgresql://intellog_user:intellog_pass@localhost:5432/intellog_db
DB_HOST=localhost
DB_PORT=5432
DB_NAME=intellog_db
DB_USER=intellog_user
DB_PASSWORD=intellog_pass

# =============================================================================
# REDIS CONFIGURATION (Feature Store + Cache + Celery Broker)
# =============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=true

# CORS (Comma-separated origins)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# =============================================================================
# SECURITY (CHANGE THESE IN PRODUCTION!)
# =============================================================================
# Generate with: openssl rand -hex 32
SECRET_KEY=your-secret-key-here-change-this-in-production-use-openssl-rand-hex-32
JWT_SECRET_KEY=your-jwt-secret-here-change-this-in-production-use-openssl-rand-hex-32
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# =============================================================================
# ML/MODEL CONFIGURATION
# =============================================================================
# Model storage path (local or S3)
MODEL_STORAGE_PATH=./models
MODEL_REGISTRY_BACKEND=local  # Options: local, mlflow, s3

# MLflow (optional - for experiment tracking)
MLFLOW_TRACKING_URI=http://localhost:5000
MLFLOW_EXPERIMENT_NAME=intellog-eta-prediction

# DVC (Data Version Control)
DVC_REMOTE_URL=  # Leave empty for local, or set to S3/GCS URL

# =============================================================================
# FEATURE STORE CONFIGURATION
# =============================================================================
FEATURE_STORE_BACKEND=redis  # Options: redis, s3
FEATURE_TTL_HOURS=6
FEATURE_CACHE_ENABLED=true

# =============================================================================
# LEARNING SYSTEM CONFIGURATION
# =============================================================================
# Retraining schedule
AUTO_RETRAIN_ENABLED=true
RETRAIN_SCHEDULE_CRON=0 2 * * 0  # Every Sunday at 2 AM UTC

# Drift detection
DRIFT_DETECTION_ENABLED=true
DRIFT_SCORE_THRESHOLD=0.3
DRIFT_CHECK_INTERVAL_HOURS=24

# A/B Testing
AB_TEST_DURATION_HOURS=48
AB_TEST_TRAFFIC_SPLIT=0.5  # 50/50 split
AB_TEST_SIGNIFICANCE_LEVEL=0.05  # p < 0.05

# Model quality gates
MAX_MAE_DEGRADATION_PERCENT=5
MIN_DATA_QUALITY_SCORE=0.8
MIN_SAMPLES_FOR_TRAINING=100

# =============================================================================
# CELERY CONFIGURATION (Background Tasks)
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Prometheus
PROMETHEUS_PORT=9090
METRICS_ENABLED=true

# Grafana
GRAFANA_PORT=3001
GRAFANA_ADMIN_PASSWORD=admin  # CHANGE THIS!

# Logging
LOG_LEVEL=INFO  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # Options: json, text

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
VITE_API_BASE_URL=http://localhost:8000
VITE_WEBSOCKET_URL=ws://localhost:8000/api/v1/ws/locations
VITE_MAP_PROVIDER=openstreetmap  # Options: openstreetmap, mapbox, google

# Mapbox (optional - if using Mapbox)
VITE_MAPBOX_ACCESS_TOKEN=

# Google Maps (optional - if using Google Maps)
VITE_GOOGLE_MAPS_API_KEY=

# =============================================================================
# ROUTING & MAPS (OSRM for real road distances)
# =============================================================================
OSRM_BASE_URL=http://localhost:5001
OSRM_PROFILE=driving
OSRM_TIMEOUT_SEC=10
OSRM_MAX_POINTS=100
OSRM_FALLBACK_HAVERSINE=true

# =============================================================================
# DYNAMIC REROUTING
# =============================================================================
REROUTE_ENABLED=true
REROUTE_INTERVAL_SEC=60
REROUTE_AVG_SPEED_KMPH=30
REROUTE_ORTOOLS_TIME_LIMIT=10

# =============================================================================
# DEVELOPMENT FLAGS (Set to false in production)
# =============================================================================
DEBUG=true
DEV_MODE=true
SKIP_AUTH=true  # Skip authentication during development
MOCK_GPS_DATA=true  # Generate mock GPS data for testing
SEED_DATABASE=true  # Seed database with sample data on startup

# =============================================================================
# EXTERNAL SERVICES (Optional - for production)
# =============================================================================
# Email notifications (for alerts)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
ALERT_EMAIL=

# PagerDuty (for production alerts)
PAGERDUTY_API_KEY=
PAGERDUTY_SERVICE_ID=

# AWS (if using S3 for model storage)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
S3_BUCKET_NAME=

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================
TEST_DATABASE_URL=postgresql://test_user:test_pass@localhost:5433/test_intellog_db
TEST_REDIS_URL=redis://localhost:6380/0
PYTEST_WORKERS=4
